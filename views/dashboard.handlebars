{{#if loggedIn}}
{{>alert}}
{{>navbar}}

<div class="db-body">
    <div class="db-central">
        <h2 class="intro-title" style="margin-bottom: 15px;">Welcome! Your 10,000th Dashboard</h2>

        <div class="db-components">
            <div class="db-boxes" id="posts-center">
                <h2 style="margin: 30px auto;">Add A Post!</h2>

                <form class="add-post" id="add-post">
                    <div class="add-post-components">
                        <input type="text" placeholder="Type Your Thoughts Here!" name="post-text" id="post-text"
                            class="textbox" />
                    </div>

                    <div class="add-post-components">
                        <input type="text" placeholder="(* Include Optional Link *)" name="post-link" id="post-link"
                            class="textbox" />
                    </div>
                    <br />
                    <button type="submit" class="highlighted-options text-center margin-center">
                        <h6>Add Post</h6>
                    </button>
                </form>
                <h2 style="margin: 30px auto;">All Posts from RSVPs</h2>


                {{#each posts as |post|}}
                <div class="db-posts" post-id={{post.id}}>
                    <div class="db-posts-display">
                        <div>
                            {{> dashboard-posts post}}

                            
                        </div>

                        <div class="posts-logos">
                                {{!-- <img src="/media/icons/love.png" /> --}}
                                <img class="comment" post-id={{post.id}} src="/media/icons/comment.png" />


                                {{#if (checkUserId post.user_id ../loggedUserId)}}

                                <img class="edit" post-id={{post.id}} src="/media/icons/edit.png" />
                                <img class="trash" post-id={{post.id}} src="/media/icons/trash.png" />
                                {{>edit-post post}}
                                {{/if}}
                            </div>

            


                    </div>

                    <div>
                        {{#if post.post_link}}

                            {{#if post.openGraphMaterial}}
                                {{>og post.openGraphMaterial}}
                            {{else}}
                                <a class="post-link" href={{post.post_link}} post-link-id={{post.id}} target="_blank">
                                    <p style="color:#FF9033;">No info displayed, CLICK LINK HERE!</p>
                                </a>

                            {{/if}}
                        {{/if}}

                    </div>

                    

                    <div>
                        {{#each post.comments}}
                        <div class="comment-section">
                            <div style="comment-blocks">
                                <p>{{comment_text}} </p>
                                <p>By - {{user.username}}</p>
                            </div>

                            <div class="posts-logos comment-blocks">
                                {{#if (checkUserId user.id ../../loggedUserId)}}
                                <img class="comment-trash" post-id={{post.id}} comment-trash-id={{id}}
                                    src="/media/icons/trash.png" />
                                {{/if}}
                            </div>
                        </div>
                        {{/each}}
                    </div>

                    {{!-- <div> --}}
                        <form comment-form-id={{post.id}} post-comment-input-block={{post.id}} class="comments-block">

                            <input type="text" placeholder="Reply Here!" name="comment-text"
                                post-comment-belongs-to={{post.id}} class="comment-textbox" />

                        </form>
                        {{!--
                    </div> --}}
                </div>
                {{/each}}
            </div>

            <div class="db-boxes">
                <h2 style="margin: 30px auto;">Change Credentials</h2>

                <form id="change-credentials">
                    <div class="edit-email-components">
                        <input type="text" placeholder="Change registered email" name="email-text" id="email-text"
                            class="textbox" />
                    </div>
                    <div class="edit-username-components">
                        <input type="text" placeholder="Change Username" name="username-text" id="username-text"
                            class="textbox" />
                    </div>
                    <div class="edit-password-components">
                        <input type="password" placeholder="Change Password" name="password-text" id="password-text"
                            class="textbox" />
                    </div>
                    <br />
                    <button type="submit" class="highlighted-options text-center margin-center">
                        <h6>Submit New Credentials</h6>
                    </button>
                </form>

                <form id="change-attendance">
                    <h2 style="margin: 30px auto;">Change Your RSVP</h2>
                    <div>
                        <div class="attendance">
                            <input type="radio" name="form-attend" value="true" />
                            <label for="attend-yes"> I will NOW attend event </label>
                        </div class="attendance">
                        <br />
                        <div class="attendance">
                            <input type="radio" name="form-attend" value="false" />
                            <label for="attend-no"> I will NO LONGER attend event</label>
                        </div>
                    </div>
                    <br />
                    <p>Decide carefully! You will not be able to change your RSVP two weeks before date. </p>
                    <br />
                    <button type="submit" class="highlighted-options text-center margin-center">
                        <h6>Change RSVP</h6>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="/script/dashboard.js"></script>
{{!--
<script type="module" src="/script/getOg.js"></script> --}}


{{/if}}